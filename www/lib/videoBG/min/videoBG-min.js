/**
 * @preserve Copyright 2011 Syd Lawrence ( www.sydlawrence.com ).
 * Version: 0.2
 *
 * Licensed under MIT and GPLv2.
 *
 * Usage: $('body').videoBG(options);
 *
 */
!function($){$.fn.videoBG=function(e,t){if(void 0===t&&(t={}),"object"==typeof e)t=$.extend({},$.fn.videoBG.defaults,e);else{if(e)return $(e).videoBG(t);t=$.fn.videoBG.defaults}var i=$(this);if(i.length){"static"!=i.css("position")&&i.css("position")||i.css("position","relative"),0===t.width&&(t.width=i.width()),0===t.height&&(t.height=i.height());var s=$.fn.videoBG.wrapper();s.height(t.height).width(t.width),t.textReplacement?(t.scale=!0,i.width(t.width).height(t.height).css("text-indent","-9999px")):s.css("z-index",t.zIndex+1),s.html(i.clone(!0));var o=$.fn.videoBG.video(t);return t.scale&&(s.height(t.height).width(t.width),o.height(t.height).width(t.width)),i.html(s),i.append(o),o.find("video")[0]}},$.fn.videoBG.setFullscreen=function(e){var t=$(window).width(),i=$(window).height();e.css("min-height",0).css("min-width",0),e.parent().width(t).height(i);var s=0;if(t/i>e.aspectRatio){e.width(t).height("auto");var o=e.height();s=(o-i)/2,0>s&&(s=0),e.css("top",-s)}else{e.width("auto").height(i);var n=e.width();if(s=(n-t)/2,0>s&&(s=0),e.css("left",-s),0===s)var d=setTimeout(function(){$.fn.videoBG.setFullscreen(e)},500)}$("body > .videoBG_wrapper").width(t).height(i)},$.fn.videoBG.video=function(e){$("html, body").scrollTop(-1);var t=$("<div/>");t.addClass("videoBG").css("position",e.position).css("z-index",e.zIndex).css("top",0).css("left",0).css("height",e.height).css("width",e.width).css("opacity",e.opacity).css("overflow","hidden");var i=$("<video/>");if(i.css("position","absolute").css("z-index",e.zIndex).attr("poster",e.poster).css("top",0).css("left",0).css("min-width","100%").css("min-height","100%"),e.autoplay&&i.attr("autoplay",e.autoplay),e.fullscreen){i.bind("canplay",function(){i.aspectRatio=i.width()/i.height(),$.fn.videoBG.setFullscreen(i)});var s;$(window).resize(function(){clearTimeout(s),s=setTimeout(function(){$.fn.videoBG.setFullscreen(i)},100)}),$.fn.videoBG.setFullscreen(i)}var o=i[0];e.loop&&(loops_left=e.loop,i.bind("ended",function(){loops_left&&o.play(),loops_left!==!0&&loops_left--})),i.bind("canplay",function(){e.autoplay&&o.play()}),$.fn.videoBG.supportsVideo()&&($.fn.videoBG.supportType("webm")?i.attr("src",e.webm):$.fn.videoBG.supportType("mp4")?i.attr("src",e.mp4):i.attr("src",e.ogv));var n=$("<img/>");return n.attr("src",e.poster).css("position","absolute").css("z-index",e.zIndex).css("top",0).css("left",0).css("min-width","100%").css("min-height","100%"),$.fn.videoBG.supportsVideo()?t.html(i):t.html(n),e.textReplacement&&(t.css("min-height",1).css("min-width",1),i.css("min-height",1).css("min-width",1),n.css("min-height",1).css("min-width",1),t.height(e.height).width(e.width),i.height(e.height).width(e.width),n.height(e.height).width(e.width)),$.fn.videoBG.supportsVideo()&&o.play(),t},$.fn.videoBG.supportsVideo=function(){return document.createElement("video").canPlayType},$.fn.videoBG.supportType=function(e){if(!$.fn.videoBG.supportsVideo())return!1;var t=document.createElement("video");switch(e){case"webm":return t.canPlayType('video/webm; codecs="vp8, vorbis"');case"mp4":return t.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');case"ogv":return t.canPlayType('video/ogg; codecs="theora, vorbis"')}return!1},$.fn.videoBG.wrapper=function(){var e=$("<div/>");return e.addClass("videoBG_wrapper").css("position","absolute").css("top",0).css("left",0),e},$.fn.videoBG.defaults={mp4:"",ogv:"",webm:"",poster:"",autoplay:!0,loop:!0,scale:!1,position:"absolute",opacity:1,textReplacement:!1,zIndex:0,width:0,height:0,fullscreen:!1,imgFallback:!0}}(jQuery);